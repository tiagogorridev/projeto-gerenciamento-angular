<ng-container *ngIf="isAdmin; else regularUser">
  <app-admin-sidebar></app-admin-sidebar>
  <app-admin-header></app-admin-header>
</ng-container>
<ng-template #regularUser>
  <app-sidebar></app-sidebar>
  <app-header></app-header>
</ng-template>

<section class="settings-container" @fadeInOut>
  <h1 class="page-title">Fale Conosco</h1>

  <div class="contact-container">
    <div class="contact-form-wrapper">
      <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form">
        <div class="form-group">
          <label for="name">Nome Completo</label>
          <input
            id="name"
            type="text"
            formControlName="name"
            [class.error]="contactForm.get('name')?.touched && contactForm.get('name')?.invalid"
            placeholder="Seu nome completo"
            aria-label="Nome Completo"
            aria-describedby="name-error">
          <span id="name-error" class="error-message" *ngIf="contactForm.get('name')?.touched && contactForm.get('name')?.invalid">
            {{ getErrorMessage('name') }}
          </span>
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input
          id="email"
          type="email"
          formControlName="email"
          class="disabled-input"
          [readonly]="true"
          [value]="contactForm.get('email')?.value"
          aria-label="Email"
          aria-describedby="email-error">
          <span id="email-error" class="error-message" *ngIf="contactForm.get('email')?.invalid">
            {{ getErrorMessage('email') }}
          </span>
        </div>

        <div class="form-group">
          <label for="subject">Assunto</label>
          <input
            id="subject"
            type="text"
            formControlName="subject"
            [class.error]="contactForm.get('subject')?.touched && contactForm.get('subject')?.invalid"
            placeholder="Assunto da mensagem"
            aria-label="Assunto"
            aria-describedby="subject-error">
          <span id="subject-error" class="error-message" *ngIf="contactForm.get('subject')?.touched && contactForm.get('subject')?.invalid">
            {{ getErrorMessage('subject') }}
          </span>
        </div>

        <div class="form-group">
          <label for="message">Mensagem</label>
          <textarea
            id="message"
            formControlName="message"
            [class.error]="contactForm.get('message')?.touched && contactForm.get('message')?.invalid"
            placeholder="Digite sua mensagem"
            aria-label="Mensagem"
            aria-describedby="message-error"></textarea>
          <span id="message-error" class="error-message" *ngIf="contactForm.get('message')?.touched && contactForm.get('message')?.invalid">
            {{ getErrorMessage('message') }}
          </span>
        </div>

        <div class="form-actions">
          <button type="button" class="cancel-btn" (click)="onCancel()" aria-label="Cancelar">
            <i class="fas fa-times"></i>
            Cancelar
          </button>
          <button type="submit" class="submit-btn" [disabled]="isSubmitting" aria-label="Enviar Mensagem">
            <i class="fas" [class.fa-paper-plane]="!isSubmitting" [class.fa-spinner]="isSubmitting" [class.fa-spin]="isSubmitting"></i>
            {{ isSubmitting ? 'Enviando...' : 'Enviar Mensagem' }}
          </button>
        </div>
      </form>

      <div class="success-message" *ngIf="showSuccessMessage" @fadeInOut>
        <i class="fas fa-check-circle"></i>
        <p>{{ showSuccessMessage }}</p>
      </div>
    </div>

    <section class="contact-info">
      <h2>Outras formas de contato</h2>

      <div class="contact-methods">
        <div class="contact-method">
          <div class="icon-wrapper">
            <i class="fas fa-envelope"></i>
          </div>
          <div class="method-details">
            <h3>Email</h3>
            <a href="mailto:contato@timetracker.com">contato@timetracker.com</a>
          </div>
        </div>

        <div class="contact-method">
          <div class="icon-wrapper">
            <i class="fab fa-whatsapp"></i>
          </div>
          <div class="method-details">
            <h3>WhatsApp</h3>
            <a href="https://wa.me/5541999999999" target="_blank">(41) 99999-9999</a>
          </div>
        </div>

        <div class="contact-method">
          <div class="icon-wrapper">
            <i class="fas fa-phone"></i>
          </div>
          <div class="method-details">
            <h3>Telefone</h3>
            <a href="tel:+554133333333">(41) 3333-3333</a>
          </div>
        </div>

        <div class="contact-method">
          <div class="icon-wrapper">
            <i class="fas fa-map-marker-alt"></i>
          </div>
          <div class="method-details">
            <h3>Endere√ßo</h3>
            <p>Rua Exemplo, 123, Curitiba, PR</p>
          </div>
        </div>
      </div>
    </section>
  </div>
</section>
