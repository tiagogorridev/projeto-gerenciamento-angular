<app-sidebar></app-sidebar>
<app-header></app-header>

<div class="projects-container">
  <div class="projects-header">
    <h1>Projetos</h1>
  </div>

  <div class="search-filter-container">
    <div class="input-group">
      <input type="text" placeholder="Pesquisar projetos..." class="input-field">
      <i class="fas fa-search search-icon"></i>
    </div>

    <div class="input-group">
      <select class="input-field">
        <option value="" disabled selected>Status</option>
        <option>Ativo</option>
        <option>Arquivado</option>
        <option>Todos</option>
      </select>
      <i class="fas fa-chevron-down dropdown-icon"></i>
    </div>

    <div class="input-group">
      <select class="input-field">
        <option value="" disabled selected>Prioridade</option>
        <option>Alta</option>
        <option>Média</option>
        <option>Baixa</option>
      </select>
      <i class="fas fa-chevron-down dropdown-icon"></i>
    </div>

    <div class="input-group">
      <input type="text" placeholder="Buscar cliente..." class="input-field">
      <i class="fas fa-chevron-down dropdown-icon"></i>
    </div>

    <button class="new-project-btn" (click)="openNewProjectModal()">
      Novo Projeto
    </button>
  </div>

  <div class="empty-state" *ngIf="!hasProjects">
    <div class="empty-state-content">
      <img src="assets/no-project.png" alt="Nenhum projeto disponível" class="empty-image">
      <p class="empty-text">Nenhum projeto disponível</p>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal" *ngIf="showNewProjectModal">
  <div class="modal-content">
    <h2>Novo Projeto</h2>

    <!-- Formulário de Projeto -->
    <form (ngSubmit)="onSubmit(projectForm)" #projectForm="ngForm">
      <div class="form-group">
        <label>Nome</label>
        <input type="text" class="input-field" [(ngModel)]="project.nome" name="nome" required>
        <div *ngIf="projectForm.submitted && !project.nome" class="error-text">Nome é obrigatório</div>
      </div>

      <div class="form-group">
        <label>Descrição</label>
        <input type="text" class="input-field" [(ngModel)]="project.descricao" name="descricao" required>
      </div>

      <div class="form-group">
        <label>Cliente</label>
        <select class="input-field" [(ngModel)]="project.cliente" name="cliente" required>
          <option value="" disabled selected>Selecione o cliente</option>
          <option>Cliente 1</option>
          <option>Cliente 2</option>
        </select>
      </div>

      <div class="form-group">
        <label>Horas estimadas</label>
        <input type="number" class="input-field" [(ngModel)]="project.horasEstimadas" name="horasEstimadas" required>
      </div>

      <div class="form-group">
        <label>Custo estimado</label>
        <input type="number" class="input-field" [(ngModel)]="project.custoEstimado" name="custoEstimado" required>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Data de Início</label>
          <p-calendar [(ngModel)]="startDate" name="dataInicio" [showIcon]="true" [showButtonBar]="true" [touchUI]="false" dateFormat="dd/mm/yy" [required]="true"></p-calendar>
        </div>

        <div class="form-group">
          <label>Data de Fim</label>
          <p-calendar [(ngModel)]="endDate" name="dataFim" [showIcon]="true" [showButtonBar]="true" [touchUI]="false" dateFormat="dd/mm/yy" [required]="true"></p-calendar>
        </div>
      </div>

      <div class="form-group">
        <label>Status</label>
        <select class="input-field" [(ngModel)]="project.status" name="status" required>
          <option value="PLANEJADO">Planejado</option>
          <option value="EM_ANDAMENTO">Em Andamento</option>
          <option value="CONCLUIDO">Concluído</option>
          <option value="CANCELADO">Cancelado</option>
        </select>
      </div>

      <div class="form-group">
        <label>Prioridade</label>
        <select class="input-field" [(ngModel)]="project.prioridade" name="prioridade" required>
          <option value="ALTA">Alta</option>
          <option value="MEDIA">Média</option>
          <option value="BAIXA">Baixa</option>
        </select>
      </div>

      <div class="modal-actions">
        <button type="button" class="cancel-btn" (click)="closeModal()">Cancelar</button>
        <button type="submit" class="create-btn" [disabled]="!projectForm.form.valid">Criar</button>
      </div>
    </form>
  </div>
</div>